/* ====== 공통 챗봇 스타일 ====== */

/* 챗봇 아이콘 버튼 */
#chatbot-button {
    position: fixed;
    bottom: 20px;   /* 화면 하단에서 20px */
    right: 20px;    /* 화면 오른쪽에서 20px */
    width: 56px;    /* 원하는 버튼 크기 */
    height: 56px;
    border-radius: 50%;
    overflow: hidden;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    cursor: pointer;
    z-index: 9999;
  }
  
  #chatbot-button img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

/* ====== Chatbot Panel – Polished ====== */

/* 패널(전체 화면 덮기, 슬라이드 인) */
#chatbot-panel {
    display: none;
    position: fixed;
    bottom: 0;
    right: 0;
    width: 480px;
    max-width: 100vw;
    height: 100%;
    background: #fff;
    z-index: 10000;
    border-left: 1px solid #e7eaf0;
    box-shadow: -8px 0 24px rgba(17,45,78,.12);
    flex-direction: column;
  
    transform: translateY(6px);
    opacity: 0;
    transition: transform .24s ease, opacity .24s ease;
  }
  
  #chatbot-panel.is-open {
    display: flex;
    transform: translateY(0);
    opacity: 1;
  }

  /* 헤더 */
  .chatbot-header {
    height: 56px;
    background: linear-gradient(135deg, #3b7fa8, #5aa9c8);
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 16px;
    font-weight: 600;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    border-radius: 8px 8px 0 0;
}

.chatbot-header .title {
    display: flex;
    align-items: center;
    gap: 10px;
}

.chatbot-header .bot-dot {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: #fff;
    color: #3b7fa8;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    font-weight: bold;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}

.chatbot-header .bot-dot img {
    width: 100%;            /* 원 크기에 맞춤 */
    height: 100%;
    object-fit: contain;    /* 비율 유지하면서 딱 맞춤 */
  }

  #chatbot-close{
    background:transparent; border:0; color:#fff; font-size:20px; cursor:pointer;
    padding:4px 6px; border-radius:8px;
  }
 
  #chatbot-close:hover {
    background: transparent;   /* 배경 투명 유지 */
    color: #fff;               /* 색상만 그대로 (원하면 더 진하게 가능) */
  }

  /* 본문(스크롤) */
  .chatbot-body{
    flex:1; overflow:auto; padding:16px 16px 12px 16px;
    background:linear-gradient(#f7f9fb, #f9fbfd);
  }
  
/* ====== 통일된 텍스트 스타일 (말풍선 기준) ====== */
.chatbot-bubble,
.welcome-card,
.chip {
  font-size: 14px;                 /* 말풍선 기준 통일 */
  line-height: 1.4;
  font-family: 'Noto Sans KR', sans-serif;
  color: #2A2A2A;
}

/* ====== 말풍선 (봇/사용자/공지) ====== */
.chatbot-stream {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.chatbot-bubble {
  display: inline-block;
  max-width: 92%;
  border-radius: 12px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);  /* box-shadow 추가 */
  padding: 8px 12px;
  font-size: 14px;
  line-height: 1.4;
  position: relative;
  overflow-wrap: anywhere;
  word-break: break-word;
}

.chatbot-bubble > div { 
  white-space: pre-wrap; 
}

/* 챗봇 메시지 */
.chatbot-bubble.bot {
  background-color: #ffffff;
  color: #4A4A4A;
  /* align-self 제거 */
}

.chatbot-bubble.user {
  background-color: #E6F2F9;  /* 연한 파란색으로 변경 */
  color: #2A2A2A;  /* 텍스트는 어두운 색으로 */
  /* align-self 제거 */
}

/* 고지문 메시지 */
.chatbot-bubble.notice {
  background-color: #FFF8E1;
  color: #5D4037;
  font-size: 13px; /* 살짝만 작게 */
}

/* 환영 말풍선 (기존 welcome-card 스타일 유지) */
.welcome-card{
  display:inline-block; max-width:92%;
  background:#fff; color:#24313c;
  border-radius:14px; padding:12px 14px; margin:6px 0 8px;
  box-shadow:0 2px 10px rgba(17,45,78,.06), 0 1px 0 #edf2f7 inset;
}

.welcome-card + .welcome-card {
  margin-top: -2px;    /* 말풍선끼리만 더 붙이기 */
}

  /* ====== 칩 버튼 크기 보정 ====== */
  .chips { 
    display: flex; 
    flex-wrap: wrap; 
    gap: 10px;  /* 이 부분이 중요! */
  }
  
  .chip {
  padding: 6px 14px;   /* 글자 커진 만큼 패딩 조정 */
  border-radius: 16px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: #d9e9f5;
  border: none;
  color: #1e4b62;
  font-weight: 600;
  cursor: pointer;
  user-select: none;
  transition: background .12s ease, box-shadow .12s ease;
}

.chip:hover {
  background: #c5dbef;
  box-shadow: none;
}
.chip:active{ transform:translateY(1px); }
  
  /* 입력 영역(고정) - 통합된 검색창 스타일 */
  .chatbot-input{
    display:flex; align-items:center; justify-content:center;
    padding:16px 20px; background:#fff; border-top:1px solid #e7eaf0;
    box-shadow:0 -4px 20px rgba(17,45,78,.06);
  }
  
  .chatbot-search-container{
    display:flex; align-items:center; 
    background-color:#fff; border-radius:9999px;
    padding:8px 12px; box-shadow:0 2px 8px rgba(0,0,0,0.06);
    border:1px solid #ccc; width:100%; max-width:400px;
    transition:all .25s ease;
  }
  
  .chatbot-search-container:focus-within{
    border-color:#245E7A; box-shadow:0 4px 16px rgba(36,94,122,.15);
  }
  
  .chatbot-search-container textarea{
    flex:1; border:none; outline:none; font-size:15px;
    min-height:44px; padding:8px 12px; background:transparent;
    color:#1f2a35; max-height:72px; overflow-y:auto;
    font-family: inherit; line-height: 1.4;
    scrollbar-width: thin; /* Firefox */
    scrollbar-color: #ccc transparent; /* Firefox */
  }
  
  /* Webkit 브라우저용 스크롤바 스타일 */
  .chatbot-search-container textarea::-webkit-scrollbar {
    width: 6px;
  }
  
  .chatbot-search-container textarea::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .chatbot-search-container textarea::-webkit-scrollbar-thumb {
    background: #ccc;
    border-radius: 3px;
  }
  
  .chatbot-search-container textarea::-webkit-scrollbar-thumb:hover {
    background: #999;
  }
  
  .chatbot-search-container textarea::placeholder{ 
    color:#97a6b5; font-weight:400; 
  }
  
  .chatbot-search-container .send-btn{
    width:44px; height:44px; border-radius:50%;
    border:0; background:linear-gradient(135deg, #245E7A 0%, #1e4b62 100%);
    color:#fff; cursor:pointer;
    display:inline-flex; align-items:center; justify-content:center;
    box-shadow:0 2px 6px rgba(36,94,122,.25);
    transition:all .25s ease;
    margin-left:8px;
    min-width: 44px; /* 터치 접근성 보장 */
  }
  
  .chatbot-search-container .send-btn:hover{ 
    background:linear-gradient(135deg, #2f6fa2 0%, #245E7A 100%);
    box-shadow:0 4px 12px rgba(36,94,122,.35);
    transform:scale(1.05);
  }
  
  .chatbot-search-container .send-btn:active{ 
    transform:scale(0.95);
    box-shadow:0 2px 4px rgba(36,94,122,.3);
  }
  
  /* 접근성 포커스 */
  #chatbot-close:focus, .chip:focus, .send-btn:focus{
    outline:2px solid #9bc4df; outline-offset:2px;
  }
  
  /* 작은 폭에서 패딩 여유 */
  @media (max-width: 480px){
    #chatbot-panel {
      width: 100%;
      border-left: none;
      border-radius: 0;
    }
  }
  
  @media (max-width: 380px){
    .chatbot-body{ padding:12px; }
    .chip{ padding:9px 12px; font-size:13px; }
  }

  .chatbot-body {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch; /* iOS 부드러운 스크롤 */
  }

  /* ====== 아바타 + 시간 표시 스타일 ====== */

/* 아바타 + 말풍선 컨테이너 */
.chatbot-message {
  display: flex;
  flex-direction: row; /* 가로 배치로 변경 */
  align-items: flex-start; /* 기본 왼쪽 정렬 */
  margin-bottom: 8px;
  position: relative;
  gap: 8px; /* 아바타와 말풍선 사이 간격 */
}

/* 봇일 경우 왼쪽 정렬 */
.chatbot-message.bot {
  justify-content: flex-start;
}

/* 사용자일 경우 오른쪽 정렬 */
.chatbot-message.user {
  justify-content: flex-end;
  align-items: flex-end;
}

/* 아바타 */
.chatbot-avatar {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  object-fit: cover;
  flex-shrink: 0;
}

/* 말풍선과 시간을 묶는 컨테이너 */
.chatbot-content {
  display: flex;
  flex-direction: column;
}

/* 시간 스타일 */
.chatbot-time {
  font-size: 11px;
  color: #888;
  margin-top: 2px;       /* 말풍선과 살짝 간격 */
  white-space: nowrap;
}

/* 봇 메시지의 시간은 왼쪽 정렬 */
.chatbot-message.bot .chatbot-time {
  align-self: flex-start;
}

/* 사용자 메시지의 시간은 오른쪽 정렬 */
.chatbot-message.user .chatbot-time {
  align-self: flex-end;
}